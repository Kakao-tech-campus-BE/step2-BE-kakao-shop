# JPA Repository Test

## 작성하면서 어려웠던 점
- 예외 케이스에 대한 테스트 코드
    - 로그를 찍어가면서 테스트를 진행했는데 Controller에서 Service로 넘어가지 않아서 Service에서 Repository를 통해 동작하는 부분은 구현하지 않았습니다.(어차피 Mock을 사용하기 때문에 테스트에서의 Service는 가짜기 때문)
- 400, 404가 헷갈립니다. 클라이언트가 잘못요청했는데 존재하지 않을 경우 404, 나머지는 400으로 생각했는데 이게 맞는지 잘 모르겠습니다.
- 카트 테스트에서 순서에 따라 테스트 결과가 달라지는 문제가 생겨서 Order Annotation을 이용해서 구현했는데 테스트 간 의존성 문제가 생길 수 있다고 생각합니다.
- 카트 추가, 업데이트 서비스 로직: 현재 상태에서 JPARepository를 이용해서 만들기는 어려울 것 같아 생략했습니다.

## 중점적으로 봐주셨으면 하는 부분
- 카트 Controller에서 예외 처리 부분
- 카트 Test에서 stub 구현 부분 (이렇게 모든 응답에 대해 stub를 거는게 맞나요?)
- 참고: 추후 사용자를 확인할 일이 생길 것 같아서 사용자 인증이 필요한 부분엔 @WithMockUser가 아닌 새로운 객체를 stub로 구현하여 jwt를 넣어주었습니다.

## Todo-List

---
- [x] Controller에 대한 TestCode 짜기
- [x] RestController에서 에러 케이스 잡기
- [x] Service 구현하기
- [x] Repository와 Service 엮기
- [x] TestCode 잘 돌아가는지 확인하기
- [ ] 예외 케이스에 대한 TestCode 짜기

## 상태 코드 정리
- `200 OK`: 클라이언트의 요청을 서버가 정상적으로 처리했을 경우
- `400 Bad Request`: 사용자의 잘못된 요청
- `401 Unauthorized`: 사용자 인증되지 않음
- `403 Forbidden`: 클라이언트 권한 없음
- `404 Not Found`: 클라이언트가 요청한 자원이 없음
- `500 Server errors`


## Error Case

### 회원가입
> - 제약조건 미충족 (400)
>    - 유저이름: 8자에서 45자 이내
>    - 이메일: `(영문+숫자)@(영문+숫자).(영문+숫자)`
>    - 비밀번호: `영문, 숫자, 특수문자 포함` && `공백없음` && `8~20자`
> - username, email, password 중 하나라도 비어있을 경우 (400)
> - 이미 존재하는 이메일일 경우 (400)

### 로그인
> - 제약조건 미충족 (400)
> - 존재하지 않는 user일 경우 (400)

### 전체 상품 조회
### 개별 상품 조회
> 해당 상품이 존재하지 않는 경우(404)

### 장바구니, 주문 공통
> 주인이 아닌 사람이 접근하는 경우(403 Forbidden)

### 장바구니 조회
### 장바구니 추가
> - optionId가 잘못된 경우(존재하지 않음) - 404
> - optionId가 중복된 경우 - 400
> - quantity = 0인 경우- 400
### 장바구니 업데이트
> - cartId가 잘못된 경우 (존재하지 않음) - 404
> - cartId가 중복된 경우 - 400
> - quantity = 0인 경우 - 400
### 장바구니 삭제

### 결재
> 장바구니가 비었을 경우 - 400
### 주문결과확인
